unit Panel_driver;

interface
uses Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, Vcl.ExtCtrls, driver_class,driver_interface;


type TPanel_driver = Class(TPanel,TDriver_Interface)
  private
  driver : TDriver;
  procedure put_details;

  // from interface
  public
  function get_id : integer;
  function get_status : integer;
  procedure update_order(updated_driver : TDriver);
  procedure destroy_from_interface;


  constructor Create(AOwner: TComponent;Pdriver : TDriver);
  destructor Destroy; override;
End;

implementation

// From iterface---------------------------------
function TPanel_driver.get_id : integer;
begin
     get_id := driver.get_id;
end;

function TPanel_driver.get_status;
begin
  get_status := driver.get_status;
end;

procedure TPanel_driver.update_order(updated_driver : TDriver);
begin
  driver.Destroy;
  driver := updated_driver;
  put_details;
end;

procedure  TPanel_driver.destroy_from_interface;
begin
  destroy;
end;


// end From iterface---------------------------------

procedure TPanel_driver.put_details;
begin
     caption := 'id: '+ intTostr(driver.get_id) + ' status: ' + intTostr(driver.get_status);
end;





constructor TPanel_driver.Create(AOwner: TComponent;Pdriver : TDriver);
begin
  inherited Create(AOwner);
  driver := Pdriver;

  // Put here order details
  put_details;
end;

destructor TPanel_driver.Destroy;
begin
  driver.Destroy;
  parent := nil;
  inherited;
end;

end.
